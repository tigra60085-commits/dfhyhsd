"""Monitoring-guide: safety monitoring protocols for psychotropic drugs.

Implements the monitoring-guide skill:
  ‚Ä¢ User enters drug name or class
  ‚Ä¢ Bot returns structured monitoring checklist:
    baseline, short-term, long-term, specific parameters
"""

from telegram import Update
from telegram.ext import ContextTypes

from states import MONITOR_DRUG, MONITOR_RESULT, MAIN_MENU
from keyboards.menus import monitor_result_keyboard, main_menu_keyboard, back_keyboard
from data.drugs import get_drug_by_name, search_drugs


# ‚îÄ‚îÄ‚îÄ Monitoring protocols ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

_MONITOR_TABLE: dict[str, dict] = {
    "–ö–ª–æ–∑–∞–ø–∏–Ω": {
        "baseline": [
            "–û–ê–ö —Å –ª–µ–π–∫–æ—Ü–∏—Ç–∞—Ä–Ω–æ–π —Ñ–æ—Ä–º—É–ª–æ–π (–ê–ù–ß/ANC > 1500/–º–∫–ª ‚Äî —É—Å–ª–æ–≤–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)",
            "–ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å: –≥–ª—é–∫–æ–∑–∞, –ª–∏–ø–∏–¥—ã, –ê–°–¢/–ê–õ–¢",
            "–≠–ö–ì (QTc, –ø—Ä–∏–∑–Ω–∞–∫–∏ –º–∏–æ–∫–∞—Ä–¥–∏—Ç–∞)",
            "–≠—Ö–æ–ö–ì (–ø—Ä–∏ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∂–∞–ª–æ–±–∞—Ö)",
            "–ü—É–ª—å—Å, –ê–î",
            "–í–µ—Å, –ò–ú–¢, –æ–±—ä—ë–º —Ç–∞–ª–∏–∏",
        ],
        "short_term": [
            "–ê–ù–ß: –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–µ—Ä–≤—ã–µ 26 –Ω–µ–¥",
            "–ü—É–ª—å—Å, –ê–î: –ø–µ—Ä–≤—ã–µ 4 –Ω–µ–¥ (–º–∏–æ–∫–∞—Ä–¥–∏—Ç!)",
            "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–µ–ª–∞ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≥—Ä–∞–Ω—É–ª–æ—Ü–∏—Ç–æ–∑–∞)",
            "–°–∏–º–ø—Ç–æ–º—ã –º–∏–æ–∫–∞—Ä–¥–∏—Ç–∞: –æ–¥—ã—à–∫–∞, —É—Ç–æ–º–ª—è–µ–º–æ—Å—Ç—å, –±–æ–ª—å –≤ –≥—Ä—É–¥–∏ ‚Äî –ø–µ—Ä–≤—ã–µ 4 –Ω–µ–¥",
            "–≠–ö–ì: –ø—Ä–∏ —Ç–∞—Ö–∏–∫–∞—Ä–¥–∏–∏, –±–æ–ª–∏ –≤ –≥—Ä—É–¥–∏",
        ],
        "long_term": [
            "–ê–ù–ß: –∫–∞–∂–¥—ã–µ 4 –Ω–µ–¥ (—Å 26 –Ω–µ–¥ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏—ë–º–∞)",
            "–ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å: –∫–∞–∂–¥—ã–µ 3 –º–µ—Å",
            "–í–µ—Å: –∫–∞–∂–¥—ã–µ 3 –º–µ—Å",
            "–ê–°–¢/–ê–õ–¢: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å",
            "–≠–ö–ì: –µ–∂–µ–≥–æ–¥–Ω–æ",
            "–£—Ä–æ–≤–µ–Ω—å –∫–ª–æ–∑–∞–ø–∏–Ω–∞ –≤ –∫—Ä–æ–≤–∏ (TDM): —Ü–µ–ª—å 250‚Äì350 –Ω–≥/–º–ª",
        ],
        "stop_criteria": [
            "–ê–ù–ß < 1000/–º–∫–ª ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞, –≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è",
            "–ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ –º–∏–æ–∫–∞—Ä–¥–∏—Ç ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞",
            "–ó–ª–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–µ–π—Ä–æ–ª–µ–ø—Ç–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º",
        ],
        "notes": "–ö–ª–æ–∑–∞–ø–∏–Ω –æ—Ç–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É REMS/—Ä–µ–≥–∏—Å—Ç—Ä–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤. –í–µ—Å—Ç–∏ –∫–∞—Ä—Ç—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ê–ù–ß.",
    },
    "–õ–∏—Ç–∏–π": {
        "baseline": [
            "–£—Ä–æ–≤–µ–Ω—å Li –≤ –∫—Ä–æ–≤–∏ (–∏—Å—Ö–æ–¥–Ω–æ 0; –∑–∞—Ç–µ–º —á–µ—Ä–µ–∑ 12 —á –ø–æ—Å–ª–µ –¥–æ–∑—ã)",
            "–ê–ú–ö (–º–æ—á–µ–≤–∏–Ω–∞, –ö—Ä), —Ä–°–ö–§",
            "–¢–¢–ì, –¢4 —Å–≤–æ–±–æ–¥–Ω—ã–π",
            "–û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –º–æ—á–∏",
            "–≠–ö–ì (–æ—Å–æ–±–µ–Ω–Ω–æ >50 –ª–µ—Ç –∏–ª–∏ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–º–Ω–µ–∑)",
            "Œí-–•–ì–ß —É –∂–µ–Ω—â–∏–Ω —Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞",
            "–í–µ—Å",
        ],
        "short_term": [
            "–£—Ä–æ–≤–µ–Ω—å Li: —á–µ—Ä–µ–∑ 5‚Äì7 –¥–Ω–µ–π –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–∑—ã",
            "–£—Ä–æ–≤–µ–Ω—å Li: —á–µ—Ä–µ–∑ 12 —á –ø–æ—Å–ª–µ –ø—Ä–∏—ë–º–∞! –¶–µ–ª—å 0.6‚Äì1.0 –º—ç–∫–≤/–ª (–æ—Å—Ç—Ä–∞—è –º–∞–Ω–∏—è: –¥–æ 1.2)",
            "–°–∏–º–ø—Ç–æ–º—ã —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏: —Ç—Ä–µ–º–æ—Ä, –ø–æ–ª–∏—É—Ä–∏—è, —Ç–æ—à–Ω–æ—Ç–∞, –∞—Ç–∞–∫—Å–∏—è",
            "–ê–ú–ö/–ö—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏, –¥–∏–µ—Ç—ã —Å ‚ÜìNa, –ù–ü–í–°",
        ],
        "long_term": [
            "–£—Ä–æ–≤–µ–Ω—å Li: –∫–∞–∂–¥—ã–µ 3‚Äì6 –º–µ—Å (–ø—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏)",
            "–ê–ú–ö/–ö—Ä, —Ä–°–ö–§: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å",
            "–¢–¢–ì: –∫–∞–∂–¥—ã–µ 6‚Äì12 –º–µ—Å (–≥–∏–ø–æ—Ç–∏—Ä–µ–æ–∑ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è —É 20‚Äì40%)",
            "–¢4 —Å–≤–æ–±.: –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –¢–¢–ì",
            "–û–ê–ú: –µ–∂–µ–≥–æ–¥–Ω–æ (–Ω–µ—Ñ—Ä–æ–≥–µ–Ω–Ω—ã–π –Ω–µ—Å–∞—Ö–∞—Ä–Ω—ã–π –¥–∏–∞–±–µ—Ç)",
            "–í–µ—Å: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å (–ø—Ä–∏–±–∞–≤–∫–∞ –≤ –≤–µ—Å–µ ‚Äî —á–∞—Å—Ç—ã–π –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç)",
            "–ö–∞–ª—å—Ü–∏–π: –µ–∂–µ–≥–æ–¥–Ω–æ (–≥–∏–ø–µ—Ä–∫–∞–ª—å—Ü–∏–µ–º–∏—è ‚Äî —Ä–µ–¥–∫–æ)",
        ],
        "stop_criteria": [
            "–£—Ä–æ–≤–µ–Ω—å Li > 1.5 –º—ç–∫–≤/–ª + –∫–ª–∏–Ω–∏–∫–∞ —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏ ‚Üí ‚Üì –¥–æ–∑—É –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å",
            "–£—Ä–æ–≤–µ–Ω—å Li > 2.0 –º—ç–∫–≤/–ª ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞, –¥–∏–∞–ª–∏–∑ –µ—Å–ª–∏ –Ω–µ —Å–Ω–∏–∂–∞–µ—Ç—Å—è",
            "—Ä–°–ö–§ < 30 ‚Üí –ø–µ—Ä–µ—Å–º–æ—Ç—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è",
        ],
        "notes": "–ò–∑–±–µ–≥–∞—Ç—å –ù–ü–í–°, —Ç–∏–∞–∑–∏–¥–Ω—ã—Ö –¥–∏—É—Ä–µ—Ç–∏–∫–æ–≤, –¥–∏–µ—Ç—ã —Å —Ä–µ–∑–∫–∏–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Å–æ–ª–∏ ‚Äî ‚Üë —É—Ä–æ–≤–µ–Ω—å Li. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–¥–µ–∫–≤–∞—Ç–Ω—É—é –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—é.",
    },
    "–í–∞–ª—å–ø—Ä–æ–∞—Ç": {
        "baseline": [
            "–û–ê–ö —Å —Ç—Ä–æ–º–±–æ—Ü–∏—Ç–∞–º–∏",
            "–ê–°–¢/–ê–õ–¢, –ì–ì–¢, –±–∏–ª–∏—Ä—É–±–∏–Ω",
            "–ü—Ä–æ—Ç—Ä–æ–º–±–∏–Ω–æ–≤–æ–µ –≤—Ä–µ–º—è",
            "–ê–º–∏–ª–∞–∑–∞/–ª–∏–ø–∞–∑–∞",
            "Œí-–•–ì–ß (–∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω –ø—Ä–∏ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏!)",
            "–£—Ä–æ–≤–µ–Ω—å –≤–∞–ª—å–ø—Ä–æ–∞—Ç–∞: –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–∞–≤–Ω–æ–≤–µ—Å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (5‚Äì7 –¥–Ω–µ–π)",
        ],
        "short_term": [
            "–û–ê–ö: —á–µ—Ä–µ–∑ 1 –º–µ—Å (—Ç—Ä–æ–º–±–æ—Ü–∏—Ç–æ–ø–µ–Ω–∏—è!)",
            "–ê–°–¢/–ê–õ–¢: —á–µ—Ä–µ–∑ 1 –º–µ—Å",
            "–£—Ä–æ–≤–µ–Ω—å –≤–∞–ª—å–ø—Ä–æ–∞—Ç–∞: –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–∑—ã; —Ü–µ–ª—å 50‚Äì100 –º–∫–≥/–º–ª (–æ—Å—Ç—Ä–∞—è –º–∞–Ω–∏—è: 94‚Äì125)",
            "–°–∏–º–ø—Ç–æ–º—ã –≥–µ–ø–∞—Ç–æ—Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏: –∂–µ–ª—Ç—É—Ö–∞, –±–æ–ª—å –≤ –ø—Ä–∞–≤–æ–º –ø–æ–¥—Ä–µ–±–µ—Ä—å–µ, –ª–µ—Ç–∞—Ä–≥–∏—è",
            "–°–∏–º–ø—Ç–æ–º—ã –ø–∞–Ω–∫—Ä–µ–∞—Ç–∏—Ç–∞: —Å–∏–ª—å–Ω–∞—è –±–æ–ª—å –≤ –∂–∏–≤–æ—Ç–µ",
        ],
        "long_term": [
            "–û–ê–ö: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å",
            "–ê–°–¢/–ê–õ–¢: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å",
            "–ê–º–∏–ª–∞–∑–∞/–ª–∏–ø–∞–∑–∞: –ø—Ä–∏ –±–æ–ª–∏ –≤ –∂–∏–≤–æ—Ç–µ",
            "–£—Ä–æ–≤–µ–Ω—å –≤–∞–ª—å–ø—Ä–æ–∞—Ç–∞: –∫–∞–∂–¥—ã–µ 6‚Äì12 –º–µ—Å (–ø—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏)",
            "–í–µ—Å: –∫–∞–∂–¥—ã–µ 3 –º–µ—Å",
            "–£ –∂–µ–Ω—â–∏–Ω: –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª (—Å–∏–Ω–¥—Ä–æ–º –ø–æ–ª–∏–∫–∏—Å—Ç–æ–∑–Ω—ã—Ö —è–∏—á–Ω–∏–∫–æ–≤ ‚Äî —Å–≤—è–∑–∞–Ω —Å –≤–∞–ª—å–ø—Ä–æ–∞—Ç–æ–º)",
            "–ê–º–º–æ–Ω–∏–π –ø–ª–∞–∑–º—ã: –ø—Ä–∏ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö (–≥–∏–ø–µ—Ä–∞–º–º–æ–Ω–∏–µ–º–∏—á–µ—Å–∫–∞—è —ç–Ω—Ü–µ—Ñ–∞–ª–æ–ø–∞—Ç–∏—è)",
        ],
        "stop_criteria": [
            "–ê–°–¢/–ê–õ–¢ > 3√ó –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã –Ω–æ—Ä–º—ã ‚Üí ‚Üì –¥–æ–∑–∞ –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å",
            "–ö–ª–∏–Ω–∏–∫–∞ –ø–∞–Ω–∫—Ä–µ–∞—Ç–∏—Ç–∞ ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞",
            "–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞ (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ!)",
            "–¢—Ä–æ–º–±–æ—Ü–∏—Ç–æ–ø–µ–Ω–∏—è < 50√ó10‚Åπ/–ª",
        ],
        "notes": "‚ö†Ô∏è –ñ–µ–Ω—â–∏–Ω—ã —Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ–Ω—Ç—Ä–∞—Ü–µ–ø—Ü–∏—è + –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–æ–ª–∏–µ–≤–æ–π –∫–∏—Å–ª–æ—Ç—ã. –í–µ—Å—Ç–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä –æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–∏–∑–∏—Ç–µ.",
    },
    "–õ–∞–º–æ—Ç—Ä–∏–¥–∂–∏–Ω": {
        "baseline": [
            "–ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–ª–ª–µ—Ä–≥–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–º–Ω–µ–∑",
            "–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–∂–Ω—ã—Ö –ø–æ–∫—Ä–æ–≤–æ–≤ (–∏—Å—Ö–æ–¥–Ω–æ ‚Äî –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)",
        ],
        "short_term": [
            "–ö–æ–∂–Ω—ã–µ –ø–æ–∫—Ä–æ–≤—ã: –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–∏–∑–∏—Ç–µ –∏ –ø—Ä–∏ –ª—é–±–æ–π —Å—ã–ø–∏",
            "–°–ª–∏–∑–∏—Å—Ç—ã–µ, –≥–ª–∞–∑–∞, –ª–∞–¥–æ–Ω–∏: –ø—Ä–∏–∑–Ω–∞–∫–∏ –°–î–ñ/–¢–≠–ù",
            "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–µ–ª–∞ –ø—Ä–∏ —Å—ã–ø–∏",
            "–õ—é–±–∞—è —Å—ã–ø—å –≤ –ø–µ—Ä–≤—ã–µ 8 –Ω–µ–¥ ‚Äî –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Å–º–æ—Ç—Ä –≤—Ä–∞—á–∞",
        ],
        "long_term": [
            "–†–µ–≥—É–ª—è—Ä–Ω—ã–π –æ—Å–º–æ—Ç—Ä –∫–æ–∂–∏",
            "–ù–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Ä—É—Ç–∏–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞",
            "–ö–æ–Ω—Ç—Ä–æ–ª—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: –æ—Ü–µ–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, —á–∞—Å—Ç–æ—Ç—ã —ç–ø–∏–∑–æ–¥–æ–≤",
        ],
        "stop_criteria": [
            "–õ—é–±–∞—è —Å—ã–ø—å + —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã (–ª–∏—Ö–æ—Ä–∞–¥–∫–∞, –ª–∏–º—Ñ–∞–¥–µ–Ω–æ–ø–∞—Ç–∏—è) ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞",
            "–°–î–ñ/–¢–≠–ù ‚Üí –≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è, –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–∏—ë–º",
            "–ë—É–ª–ª—ë–∑–Ω—ã–µ –ø–æ—Ä–∞–∂–µ–Ω–∏—è –∫–æ–∂–∏/—Å–ª–∏–∑–∏—Å—Ç—ã—Ö",
        ],
        "notes": "–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ç–∏—Ç—Ä–∞—Ü–∏—è ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ–∫–∞–∑–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ –°–î–ñ. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞ –æ –ø—Ä–∏–∑–Ω–∞–∫–∞—Ö –æ–ø–∞—Å–Ω–æ–π —Å—ã–ø–∏.",
    },
    "–û–ª–∞–Ω–∑–∞–ø–∏–Ω": {
        "baseline": [
            "–í–µ—Å, —Ä–æ—Å—Ç, –ò–ú–¢, –æ–±—ä—ë–º —Ç–∞–ª–∏–∏",
            "–ê–î —Å–∏–¥—è/—Å—Ç–æ—è (–æ—Ä—Ç–æ—Å—Ç–∞–∑)",
            "–ì–ª—é–∫–æ–∑–∞ –Ω–∞—Ç–æ—â–∞–∫ / HbA1c",
            "–õ–∏–ø–∏–¥–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å (–æ–±—â–∏–π —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω, –õ–ü–ù–ü, –õ–ü–í–ü, –¢–ì)",
            "–≠–ö–ì (QTc)",
            "–≠–ü–° (—ç–∫—Å—Ç—Ä–∞–ø–∏—Ä–∞–º–∏–¥–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã): —à–∫–∞–ª–∞ AIMS, SAS, BARS",
            "–ü—Ä–æ–ª–∞–∫—Ç–∏–Ω (–ø—Ä–∏ –∂–∞–ª–æ–±–∞—Ö)",
        ],
        "short_term": [
            "–í–µ—Å: –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–µ—Ä–≤—ã–µ 4 –Ω–µ–¥",
            "–ì–ª—é–∫–æ–∑–∞: —á–µ—Ä–µ–∑ 4 –Ω–µ–¥",
            "–≠–ö–ì: —á–µ—Ä–µ–∑ 2‚Äì4 –Ω–µ–¥ (QTc) –ø—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –¥–æ–∑–∞—Ö",
            "–ê–î: –ø–µ—Ä–≤—ã–µ 2 –Ω–µ–¥ (–æ—Ä—Ç–æ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–∏–ø–æ—Ç–µ–Ω–∑–∏—è)",
        ],
        "long_term": [
            "–í–µ—Å, –û–¢: –∫–∞–∂–¥—ã–µ 3 –º–µ—Å",
            "–ì–ª—é–∫–æ–∑–∞/HbA1c: –∫–∞–∂–¥—ã–µ 3 –º–µ—Å –ø–µ—Ä–≤—ã–π –≥–æ–¥, –∑–∞—Ç–µ–º –µ–∂–µ–≥–æ–¥–Ω–æ",
            "–õ–∏–ø–∏–¥–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å: –∫–∞–∂–¥—ã–µ 3 –º–µ—Å –ø–µ—Ä–≤—ã–π –≥–æ–¥, –∑–∞—Ç–µ–º –µ–∂–µ–≥–æ–¥–Ω–æ",
            "–≠–ü–° (AIMS): –∫–∞–∂–¥—ã–µ 6‚Äì12 –º–µ—Å (—Ç–∞—Ä–¥–∏–≤–Ω–∞—è –¥–∏—Å–∫–∏–Ω–µ–∑–∏—è)",
            "–ü—Ä–æ–ª–∞–∫—Ç–∏–Ω: –ø—Ä–∏ –∂–∞–ª–æ–±–∞—Ö (–º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è, –≥–∏–Ω–µ–∫–æ–º–∞—Å—Ç–∏—è)",
        ],
        "stop_criteria": [
            "HbA1c > 7% –±–µ–∑ —Å–∞—Ö–∞—Ä–Ω–æ–≥–æ –¥–∏–∞–±–µ—Ç–∞ –≤ –∞–Ω–∞–º–Ω–µ–∑–µ ‚Üí –ø–µ—Ä–µ—Å–º–æ—Ç—Ä —Ç–µ—Ä–∞–ø–∏–∏",
            "–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¢–ì/—Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω–∞ ‚Üí –ø–µ—Ä–µ—Å–º–æ—Ç—Ä",
            "–ó–ª–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–µ–π—Ä–æ–ª–µ–ø—Ç–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞",
        ],
        "notes": "–ù–∞–∏–±–æ–ª—å—à–∏–π –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫ —Å—Ä–µ–¥–∏ –∞—Ç–∏–ø–∏—á–Ω—ã—Ö –∞–Ω—Ç–∏–ø—Å–∏—Ö–æ—Ç–∏–∫–æ–≤. –°—Ç—Ä–∞—Ç–µ–≥–∏—è: –¥–∏–µ—Ç–∞ + —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ñ–æ—Ä–º–∏–Ω–∞.",
    },
    "–†–∏—Å–ø–µ—Ä–∏–¥–æ–Ω": {
        "baseline": [
            "–í–µ—Å, –ò–ú–¢, –û–¢",
            "–ì–ª—é–∫–æ–∑–∞, –ª–∏–ø–∏–¥–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å",
            "–≠–ö–ì",
            "–≠–ü–° (AIMS, SAS, BARS)",
            "–ü—Ä–æ–ª–∞–∫—Ç–∏–Ω",
            "–ê–î —Å–∏–¥—è/—Å—Ç–æ—è",
        ],
        "short_term": [
            "–ê–î –ø–µ—Ä–≤—ã–µ 2‚Äì4 –Ω–µ–¥",
            "–ü—Ä–æ–ª–∞–∫—Ç–∏–Ω: —á–µ—Ä–µ–∑ 4‚Äì8 –Ω–µ–¥ (–≥–∏–ø–µ—Ä–ø—Ä–æ–ª–∞–∫—Ç–∏–Ω–µ–º–∏—è —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ)",
            "–≠–ü–°: –ø–µ—Ä–≤—ã–µ 4 –Ω–µ–¥",
        ],
        "long_term": [
            "–í–µ—Å/–û–¢: –∫–∞–∂–¥—ã–µ 3 –º–µ—Å",
            "–ì–ª—é–∫–æ–∑–∞/–ª–∏–ø–∏–¥—ã: –∫–∞–∂–¥—ã–µ 3‚Äì6 –º–µ—Å",
            "–ü—Ä–æ–ª–∞–∫—Ç–∏–Ω: –∫–∞–∂–¥—ã–µ 6‚Äì12 –º–µ—Å –∏–ª–∏ –ø—Ä–∏ –∂–∞–ª–æ–±–∞—Ö",
            "–≠–ü–°/—Ç–∞—Ä–¥–∏–≤–Ω–∞—è –¥–∏—Å–∫–∏–Ω–µ–∑–∏—è: –∫–∞–∂–¥—ã–µ 6‚Äì12 –º–µ—Å",
            "–î–µ–Ω—Å–∏—Ç–æ–º–µ—Ç—Ä–∏—è: –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –≥–∏–ø–µ—Ä–ø—Ä–æ–ª–∞–∫—Ç–∏–Ω–µ–º–∏–∏ (—Ä–∏—Å–∫ –æ—Å—Ç–µ–æ–ø–æ—Ä–æ–∑–∞)",
        ],
        "stop_criteria": [
            "–¢—è–∂—ë–ª–∞—è –≠–ü–°/–∞–∫–∞—Ç–∏–∑–∏—è ‚Üí —Å–Ω–∏–∑–∏—Ç—å –¥–æ–∑—É –∏–ª–∏ —Å–º–µ–Ω–∏—Ç—å –ø—Ä–µ–ø–∞—Ä–∞—Ç",
            "–ü—Ä–æ–ª–∞–∫—Ç–∏–Ω > 100 –Ω–≥/–º–ª + –∫–ª–∏–Ω–∏–∫–∞ ‚Üí –ø–µ—Ä–µ—Å–º–æ—Ç—Ä",
            "–ó–ª–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–µ–π—Ä–æ–ª–µ–ø—Ç–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞",
        ],
        "notes": "–ù–∞–∏–±–æ–ª—å—à–∏–π —Ä–∏—Å–∫ –≥–∏–ø–µ—Ä–ø—Ä–æ–ª–∞–∫—Ç–∏–Ω–µ–º–∏–∏ —Å—Ä–µ–¥–∏ –∞—Ç–∏–ø–∏—á–Ω—ã—Ö. –û–±—Å—É–¥–∏—Ç—å —Å –ø–∞—Ü–∏–µ–Ω—Ç–æ–º –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è: –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è, —Å–µ–∫—Å—É–∞–ª—å–Ω–∞—è –¥–∏—Å—Ñ—É–Ω–∫—Ü–∏—è, –æ—Å—Ç–µ–æ–ø–æ—Ä–æ–∑.",
    },
    "–ê—Ä–∏–ø–∏–ø—Ä–∞–∑–æ–ª": {
        "baseline": [
            "–í–µ—Å, –ò–ú–¢, –û–¢",
            "–ì–ª—é–∫–æ–∑–∞, –ª–∏–ø–∏–¥–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å",
            "–≠–ö–ì",
            "–≠–ü–°",
            "–û—Ü–µ–Ω–∫–∞ –∞–∫–∞—Ç–∏–∑–∏–∏ (BARS)",
        ],
        "short_term": [
            "–ê–∫–∞—Ç–∏–∑–∏—è: –ø–µ—Ä–≤—ã–µ 2‚Äì4 –Ω–µ–¥ (–º–æ–∂–µ—Ç —É—Å–∏–ª–∏—Ç—å—Å—è, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω –∫ –¥—Ä—É–≥–æ–º—É –ê–ê)",
            "–≠–ü–° –ø–µ—Ä–≤—ã–µ 4 –Ω–µ–¥",
        ],
        "long_term": [
            "–í–µ—Å/–û–¢: –∫–∞–∂–¥—ã–µ 3‚Äì6 –º–µ—Å",
            "–ì–ª—é–∫–æ–∑–∞/–ª–∏–ø–∏–¥—ã: –µ–∂–µ–≥–æ–¥–Ω–æ",
            "–≠–ü–°/—Ç–∞—Ä–¥–∏–≤–Ω–∞—è –¥–∏—Å–∫–∏–Ω–µ–∑–∏—è: –∫–∞–∂–¥—ã–µ 12 –º–µ—Å",
        ],
        "stop_criteria": [
            "–¢—è–∂—ë–ª–∞—è –∞–∫–∞—Ç–∏–∑–∏—è ‚Üí —Å–Ω–∏–∑–∏—Ç—å –¥–æ–∑—É, —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Œ≤-–±–ª–æ–∫–∞—Ç–æ—Ä—ã –∏–ª–∏ –∫–ª–æ–Ω–∞–∑–µ–ø–∞–º",
            "–ó–ª–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–µ–π—Ä–æ–ª–µ–ø—Ç–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞",
        ],
        "notes": "–ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏ –Ω–µ–π—Ç—Ä–∞–ª–µ–Ω. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≥–∏–ø–µ—Ä–ø—Ä–æ–ª–∞–∫—Ç–∏–Ω–µ–º–∏—è. –ê–∫–∞—Ç–∏–∑–∏—è ‚Äî —Ç–∏–ø–∏—á–Ω—ã–π –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç. –ü—Ä–∏ –∞–∫–∞—Ç–∏–∑–∏–∏: —Å–Ω–∏–∑–∏—Ç—å –¥–æ–∑—É, –ø—Ä–æ–ø—Ä–∞–Ω–æ–ª–æ–ª 10‚Äì80 –º–≥/—Å—É—Ç, –∫–ª–æ–Ω–∞–∑–µ–ø–∞–º.",
    },
    "–ö–≤–µ—Ç–∏–∞–ø–∏–Ω": {
        "baseline": [
            "–í–µ—Å, –ò–ú–¢, –û–¢",
            "–ì–ª—é–∫–æ–∑–∞, –ª–∏–ø–∏–¥—ã",
            "–≠–ö–ì (QTc)",
            "–≠–ü–°",
            "–ö–∞—Ç–∞—Ä–∞–∫—Ç–∞ (–ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏)",
        ],
        "short_term": [
            "–ê–î –ø–µ—Ä–≤—ã–µ 2 –Ω–µ–¥ (–æ—Ä—Ç–æ—Å—Ç–∞–∑ ‚Äî —á–∞—Å—Ç—ã–π –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —Ç–µ—Ä–∞–ø–∏–∏)",
            "–ì–ª—é–∫–æ–∑–∞ —á–µ—Ä–µ–∑ 4‚Äì8 –Ω–µ–¥",
        ],
        "long_term": [
            "–í–µ—Å/–û–¢: –∫–∞–∂–¥—ã–µ 3 –º–µ—Å",
            "–ì–ª—é–∫–æ–∑–∞/–ª–∏–ø–∏–¥—ã: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å",
            "–≠–ö–ì: –ø—Ä–∏ –¥–æ–∑–∞—Ö >400 –º–≥/—Å—É—Ç –∏–ª–∏ —Ñ–∞–∫—Ç–æ—Ä–∞—Ö —Ä–∏—Å–∫–∞ QTc",
            "–û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –æ—Å–º–æ—Ç—Ä: –∫–∞–∂–¥—ã–µ 6‚Äì12 –º–µ—Å –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏",
        ],
        "stop_criteria": [
            "QTc > 500 –º—Å ‚Üí —Å–Ω–∏–∑–∏—Ç—å –¥–æ–∑—É –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å",
            "–ó–ª–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–µ–π—Ä–æ–ª–µ–ø—Ç–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º",
        ],
        "notes": "–†–∏—Å–∫ –∫–∞—Ç–∞—Ä–∞–∫—Ç—ã –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏. –≠–ü–° ‚Äî —Ä–µ–¥–∫–æ –ø—Ä–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–æ–∑–∞—Ö. –ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–∞–∂–µ–Ω.",
    },
}

_CLASS_MONITORING: dict[str, dict] = {
    "SSRI": {
        "baseline": [
            "–í–µ—Å (–∏—Å—Ö–æ–¥–Ω—ã–π)",
            "–°–∫—Ä–∏–Ω–∏–Ω–≥ –±–∏–ø–æ–ª—è—Ä–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–µ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –º–æ–Ω–æ—Ç–µ—Ä–∞–ø–∏—é SSRI –ø—Ä–∏ –º–∞–Ω–∏–∞–∫–∞–ª—å–Ω–æ–º –∞–Ω–∞–º–Ω–µ–∑–µ)",
            "–°–∫—Ä–∏–Ω–∏–Ω–≥ —Å—É–∏—Ü–∏–¥–∞–ª—å–Ω–æ–≥–æ —Ä–∏—Å–∫–∞",
            "–≠–ö–ì: –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —ç—Å—Ü–∏—Ç–∞–ª–æ–ø—Ä–∞–º–∞/—Ü–∏—Ç–∞–ª–æ–ø—Ä–∞–º–∞ —É –ª–∏—Ü >65 –ª–µ—Ç –∏–ª–∏ —Å –∫–∞—Ä–¥–∏–∞–ª—å–Ω–æ–π –ø–∞—Ç–æ–ª–æ–≥–∏–µ–π",
        ],
        "short_term": [
            "–°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫: ‚Üë –≤–Ω–∏–º–∞–Ω–∏–µ –ø–µ—Ä–≤—ã–µ 4 –Ω–µ–¥ (FDA black box —É –º–æ–ª–æ–¥—ã—Ö <25 –ª–µ—Ç)",
            "–°–∏–º–ø—Ç–æ–º—ã —Å–µ—Ä–æ—Ç–æ–Ω–∏–Ω–æ–≤–æ–≥–æ —Å–∏–Ω–¥—Ä–æ–º–∞: –≥–∏–ø–µ—Ä—Ç–µ—Ä–º–∏—è, —Ç—Ä–µ–º–æ—Ä, —Ç–∞—Ö–∏–∫–∞—Ä–¥–∏—è, –∞–∂–∏—Ç–∞—Ü–∏—è",
            "–ì–∏–ø–æ–Ω–∞—Ç—Ä–∏–µ–º–∏—è —É –ø–æ–∂–∏–ª—ã—Ö: Na+ —á–µ—Ä–µ–∑ 4‚Äì8 –Ω–µ–¥",
        ],
        "long_term": [
            "–í–µ—Å: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å",
            "–°–µ–∫—Å—É–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–∏–∑–∏—Ç–µ (—á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ –Ω–µ—Å–æ–±–ª—é–¥–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞)",
            "QTc (—ç—Å—Ü–∏—Ç–∞–ª–æ–ø—Ä–∞–º): –≠–ö–ì –ø—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –¥–æ–∑–∞—Ö",
        ],
        "stop_criteria": [
            "Na+ < 130 –º—ç–∫–≤/–ª ‚Üí —Å–Ω–∏–∑–∏—Ç—å –¥–æ–∑—É –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å",
            "QTc > 500 –º—Å (—ç—Å—Ü–∏—Ç–∞–ª–æ–ø—Ä–∞–º) ‚Üí —Å–Ω–∏–∑–∏—Ç—å –¥–æ–∑—É",
            "–°–µ—Ä–æ—Ç–æ–Ω–∏–Ω–æ–≤—ã–π —Å–∏–Ω–¥—Ä–æ–º ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞",
        ],
        "notes": "–ì–∏–ø–æ–Ω–∞—Ç—Ä–∏–µ–º–∏—è (SIADH) ‚Äî —á–∞—â–µ —É –ø–æ–∂–∏–ª—ã—Ö –∂–µ–Ω—â–∏–Ω. –°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ –ø–µ—Ä–≤—ã–µ 4 –Ω–µ–¥ ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ —É –º–æ–ª–æ–¥—ã—Ö. –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ MAOI: 2 –Ω–µ–¥ –æ—Ç–º—ã–≤–∞–Ω–∏—è (5 –Ω–µ–¥ –¥–ª—è —Ñ–ª—É–æ–∫—Å–µ—Ç–∏–Ω–∞).",
    },
    "SNRI": {
        "baseline": [
            "–ê–î (–∏—Å—Ö–æ–¥–Ω–æ–µ)",
            "–í–µ—Å",
            "–°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫",
        ],
        "short_term": [
            "–ê–î: —á–µ—Ä–µ–∑ 2‚Äì4 –Ω–µ–¥ –∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º ‚Üë –¥–æ–∑—ã (–≤–µ–Ω–ª–∞—Ñ–∞–∫—Å–∏–Ω ‚Üë —Å–∏—Å—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ –ê–î –ø—Ä–∏ >150 –º–≥/—Å—É—Ç)",
        ],
        "long_term": [
            "–ê–î: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å",
            "–í–µ—Å: –∫–∞–∂–¥—ã–µ 6 –º–µ—Å",
        ],
        "stop_criteria": [
            "–ê–ì –Ω–∞ —Ñ–æ–Ω–µ —Ç–µ—Ä–∞–ø–∏–∏ ‚Üí —Å–Ω–∏–∑–∏—Ç—å –¥–æ–∑—É –∏–ª–∏ —Å–º–µ–Ω–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π –∫–ª–∞—Å—Å",
        ],
        "notes": "–î—É–ª–æ–∫—Å–µ—Ç–∏–Ω –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω –ø—Ä–∏ —Ç—è–∂—ë–ª–æ–π –ø–æ—á–µ—á–Ω–æ–π/–ø–µ—á—ë–Ω–æ—á–Ω–æ–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏. –í—ã—Ä–∞–∂–µ–Ω–Ω—ã–π —Å–∏–Ω–¥—Ä–æ–º –æ—Ç–º–µ–Ω—ã ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –≤–µ–Ω–ª–∞—Ñ–∞–∫—Å–∏–Ω–µ.",
    },
    "–ë–µ–Ω–∑–æ–¥–∏–∞–∑–µ–ø–∏–Ω—ã": {
        "baseline": [
            "–ê–Ω–∞–º–Ω–µ–∑ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ü–ê–í –∏ –∞–ª–∫–æ–≥–æ–ª–µ–º",
            "–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —Å—Ç–∞—Ç—É—Å (—É –ø–æ–∂–∏–ª—ã—Ö)",
            "–§—É–Ω–∫—Ü–∏—è —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è (—Ä–∏—Å–∫ –ø–∞–¥–µ–Ω–∏–π)",
            "–û—Ü–µ–Ω–∫–∞ —Ç—Ä–µ–≤–æ–∂–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (HADS, GAD-7)",
        ],
        "short_term": [
            "–ü—Ä–∏–∑–Ω–∞–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏/—Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç–∏",
            "–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è (–∞–Ω—Ç–µ—Ä–æ–≥—Ä–∞–¥–Ω–∞—è –∞–º–Ω–µ–∑–∏—è)",
        ],
        "long_term": [
            "–†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è: —Ü–µ–ª—å ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∑–∞ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
            "–§—É–Ω–∫—Ü–∏—è —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è —É –ø–æ–∂–∏–ª—ã—Ö",
        ],
        "stop_criteria": [
            "–ö—É—Ä—Å >4 –Ω–µ–¥ –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π ‚Üí –ø–ª–∞–Ω –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –æ—Ç–º–µ–Ω—ã",
        ],
        "notes": "–ö—É—Ä—Å ‚â§4 –Ω–µ–¥. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –æ—Ç–º–µ–Ω–∞ (10‚Äì25% –¥–æ–∑—ã –≤ –º–µ—Å—è—Ü). –°–ø–∏—Å–æ–∫ –ë–∏—Ä—Å–∞: –∏–∑–±–µ–≥–∞—Ç—å —É –ø–æ–∂–∏–ª—ã—Ö (—Ä–∏—Å–∫ –ø–∞–¥–µ–Ω–∏–π, –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π –¥–µ—Ñ–∏—Ü–∏—Ç).",
    },
}


def _get_monitoring_info(drug: dict) -> dict | None:
    name = drug.get("name", "")
    for key in _MONITOR_TABLE:
        if key.lower() == name.lower():
            return _MONITOR_TABLE[key]
    return None


def _get_class_monitoring(drug: dict) -> dict | None:
    drug_class = drug.get("class", "")
    return _CLASS_MONITORING.get(drug_class)


def _build_monitor_text(drug: dict, spec_info: dict | None, class_info: dict | None) -> str:
    lines = [
        f"üî≠ *–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {drug['name']}*",
        f"–ö–ª–∞—Å—Å: {drug.get('class', '‚Äî')}",
        "",
    ]

    info = spec_info or class_info
    if not info:
        lines.append("–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º.")
        return "\n".join(lines)

    if spec_info:
        lines.append("*üìã –ò—Å—Ö–æ–¥–Ω—ã–π —Å–∫—Ä–∏–Ω–∏–Ω–≥ (–¥–æ –Ω–∞—á–∞–ª–∞ –ª–µ—á–µ–Ω–∏—è):*")
        for item in spec_info["baseline"]:
            lines.append(f"  ‚úì {item}")
        lines += ["", "*‚è± –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ø–µ—Ä–≤—ã–µ 4‚Äì12 –Ω–µ–¥):*"]
        for item in spec_info["short_term"]:
            lines.append(f"  ‚Ä¢ {item}")
        lines += ["", "*üìÖ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:*"]
        for item in spec_info["long_term"]:
            lines.append(f"  ‚Ä¢ {item}")
        lines += ["", "*üö® –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è / –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ—Ä–∞–ø–∏–∏:*"]
        for item in spec_info["stop_criteria"]:
            lines.append(f"  ‚ùó {item}")
        if spec_info.get("notes"):
            lines += ["", f"üìå *–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:* {spec_info['notes']}"]
    elif class_info:
        lines.append(f"_(–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–ª–∞—Å—Å—É {drug.get('class', '‚Äî')})_")
        lines += ["", "*üìã –ò—Å—Ö–æ–¥–Ω—ã–π —Å–∫—Ä–∏–Ω–∏–Ω–≥:*"]
        for item in class_info["baseline"]:
            lines.append(f"  ‚úì {item}")
        lines += ["", "*‚è± –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:*"]
        for item in class_info["short_term"]:
            lines.append(f"  ‚Ä¢ {item}")
        lines += ["", "*üìÖ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:*"]
        for item in class_info["long_term"]:
            lines.append(f"  ‚Ä¢ {item}")
        if class_info.get("notes"):
            lines += ["", f"üìå *–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:* {class_info['notes']}"]

    lines += [
        "",
        "‚ö†Ô∏è _–ü—Ä–æ—Ç–æ–∫–æ–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏. "
        "–°–≤–µ—Ä—è–π—Ç–µ—Å—å —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏._",
    ]
    return "\n".join(lines)


# ‚îÄ‚îÄ‚îÄ Conversation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

async def start_monitor_guide(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    await update.message.reply_text(
        "üî≠ *–ü—Ä–æ—Ç–æ–∫–æ–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞*\n\n"
        "–í–≤–µ–¥–∏—Ç–µ –ú–ù–ù –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞:\n"
        "_–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–ª–æ–∑–∞–ø–∏–Ω, –õ–∏—Ç–∏–π, –í–∞–ª—å–ø—Ä–æ–∞—Ç, –û–ª–∞–Ω–∑–∞–ø–∏–Ω_",
        parse_mode="Markdown",
        reply_markup=back_keyboard("back:main"),
    )
    return MONITOR_DRUG


async def monitor_drug_message(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    name = update.message.text.strip()

    drug = get_drug_by_name(name)
    if not drug:
        results = search_drugs(name)
        drug = results[0] if results else None

    if not drug:
        await update.message.reply_text(
            f"‚ö†Ô∏è –ü—Ä–µ–ø–∞—Ä–∞—Ç *{name}* –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ.\n\n"
            "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –ú–ù–ù (–Ω–∞ —Ä—É—Å—Å–∫–æ–º) –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.",
            parse_mode="Markdown",
        )
        return MONITOR_DRUG

    spec_info = _get_monitoring_info(drug)
    class_info = _get_class_monitoring(drug)

    text = _build_monitor_text(drug, spec_info, class_info)
    for i in range(0, len(text), 4000):
        await update.message.reply_text(text[i:i + 4000], parse_mode="Markdown")

    await update.message.reply_text(
        "–ü—Ä–æ—Ç–æ–∫–æ–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.",
        reply_markup=monitor_result_keyboard(),
    )
    return MONITOR_RESULT


async def monitor_result_callback(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    query = update.callback_query
    await query.answer()
    data = query.data

    if data == "back:main":
        await query.message.reply_text("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=main_menu_keyboard())
        return MAIN_MENU

    if data == "mon:again":
        await query.message.reply_text(
            "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞:",
            reply_markup=back_keyboard("back:main"),
        )
        return MONITOR_DRUG

    return MONITOR_RESULT
