"""Scale-calculator: psychometric rating scales reference and score interpreter.

Implements the scale-calc skill:
  ‚Ä¢ User selects a scale (PHQ-9, GAD-7, HAM-D, MADRS, PANSS, etc.)
  ‚Ä¢ Bot shows scale description, item list, scoring guide
  ‚Ä¢ User can enter total score for interpretation
"""

from telegram import Update
from telegram.ext import ContextTypes

from states import SCALE_SELECT, SCALE_INPUT, SCALE_RESULT, MAIN_MENU
from keyboards.menus import (
    scale_select_keyboard, scale_result_keyboard,
    main_menu_keyboard, back_keyboard,
)


# ‚îÄ‚îÄ‚îÄ Scale data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

_SCALES: dict[str, dict] = {
    "PHQ9": {
        "name": "PHQ-9 (Patient Health Questionnaire‚Äì9)",
        "purpose": "–°–∫—Ä–∏–Ω–∏–Ω–≥ –∏ –æ—Ü–µ–Ω–∫–∞ —Ç—è–∂–µ—Å—Ç–∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏",
        "items": 9,
        "range": "0‚Äì27",
        "time": "2‚Äì5 –º–∏–Ω—É—Ç",
        "source": "Kroenke et al., 2001; JGIM",
        "items_list": [
            "1. –ú–∞–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞/—É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –æ—Ç –∑–∞–Ω—è—Ç–∏–π",
            "2. –ü–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å, –¥–µ–ø—Ä–µ—Å—Å–∏—è, –±–µ–∑–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å",
            "3. –ü—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–Ω–æ–º",
            "4. –£—Å—Ç–∞–ª–æ—Å—Ç—å, —É–ø–∞–¥–æ–∫ —Å–∏–ª",
            "5. –ü–ª–æ—Ö–æ–π –∞–ø–ø–µ—Ç–∏—Ç –∏–ª–∏ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏–µ",
            "6. –ü–ª–æ—Ö–æ–µ –º–Ω–µ–Ω–∏–µ –æ —Å–µ–±–µ / –≤–∏–Ω–æ–≤–Ω–æ—Å—Ç—å",
            "7. –¢—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–µ–π",
            "8. –ó–∞—Ç–æ—Ä–º–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∏–ª–∏ –∞–∂–∏—Ç–∞—Ü–∏—è",
            "9. –ú—ã—Å–ª–∏ –æ —Å–º–µ—Ä—Ç–∏ –∏–ª–∏ —á–ª–µ–Ω–æ–≤—Ä–µ–¥–∏—Ç–µ–ª—å—Å—Ç–≤–µ",
        ],
        "scoring": "–ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç: 0 (–Ω–∏–∫–æ–≥–¥–∞) ‚Äì 3 (–ø–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å); —Å—É–º–º–∞ 0‚Äì27",
        "interpretation": [
            ("0‚Äì4", "–ù–µ—Ç –¥–µ–ø—Ä–µ—Å—Å–∏–∏ –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è"),
            ("5‚Äì9", "–õ—ë–≥–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
            ("10‚Äì14", "–£–º–µ—Ä–µ–Ω–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
            ("15‚Äì19", "–£–º–µ—Ä–µ–Ω–Ω–æ-—Ç—è–∂—ë–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
            ("20‚Äì27", "–¢—è–∂—ë–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
        ],
        "clinical_note": "–í–æ–ø—Ä–æ—Å 9 (—Å—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –º—ã—Å–ª–∏) —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–ª–∏–Ω–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ–±—â–µ–≥–æ –±–∞–ª–ª–∞. PHQ-9 ‚â• 10 ‚Äî —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 88%, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å 88% –¥–ª—è –ë–î–†.",
    },
    "GAD7": {
        "name": "GAD-7 (Generalized Anxiety Disorder‚Äì7)",
        "purpose": "–°–∫—Ä–∏–Ω–∏–Ω–≥ –∏ –æ—Ü–µ–Ω–∫–∞ –≥–µ–Ω–µ—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç—Ä–µ–≤–æ–∂–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞",
        "items": 7,
        "range": "0‚Äì21",
        "time": "2‚Äì3 –º–∏–Ω—É—Ç—ã",
        "source": "Spitzer et al., 2006; Arch Intern Med",
        "items_list": [
            "1. –ù–µ—Ä–≤–æ–∑–Ω–æ—Å—Ç—å, —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å",
            "2. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ",
            "3. –ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –æ —Ä–∞–∑–Ω—ã—Ö –≤–µ—â–∞—Ö",
            "4. –¢—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ–º",
            "5. –ë–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –Ω–∞—Å—Ç–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ–µ, —á—Ç–æ —Ç—Ä—É–¥–Ω–æ —Å–∏–¥–µ—Ç—å –Ω–∞ –º–µ—Å—Ç–µ",
            "6. –õ—ë–≥–∫–∞—è —Ä–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
            "7. –û—â—É—â–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ö–∞, —á—Ç–æ –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—å—Å—è —á—Ç–æ-—Ç–æ —É–∂–∞—Å–Ω–æ–µ",
        ],
        "scoring": "–ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç: 0 (–Ω–∏–∫–æ–≥–¥–∞) ‚Äì 3 (–ø–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å); —Å—É–º–º–∞ 0‚Äì21",
        "interpretation": [
            ("0‚Äì4", "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å"),
            ("5‚Äì9", "–õ—ë–≥–∫–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å"),
            ("10‚Äì14", "–£–º–µ—Ä–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å"),
            ("15‚Äì21", "–¢—è–∂—ë–ª–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å"),
        ],
        "clinical_note": "–ü–æ—Ä–æ–≥ 10: —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 89%, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å 82% –¥–ª—è –ì–¢–†. –¢–∞–∫–∂–µ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –ø–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Ñ–æ–±–∏–∏, –ü–¢–°–†.",
    },
    "HAMD": {
        "name": "HAM-D (Hamilton Depression Rating Scale)",
        "purpose": "–û—Ü–µ–Ω–∫–∞ —Ç—è–∂–µ—Å—Ç–∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏ (–¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –∏ –∫–ª–∏–Ω–∏–∫–∏)",
        "items": 17,
        "range": "0‚Äì52 (17 –ø—É–Ω–∫—Ç–æ–≤)",
        "time": "20‚Äì30 –º–∏–Ω—É—Ç (–∏–Ω—Ç–µ—Ä–≤—å—é)",
        "source": "Hamilton, 1960; J Neurol Neurosurg Psychiatry",
        "items_list": [
            "1. –î–µ–ø—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (0‚Äì4)",
            "2. –ß—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã (0‚Äì4)",
            "3. –°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –∏–¥–µ–∞—Ü–∏–∏ (0‚Äì4)",
            "4. –†–∞–Ω–Ω—è—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ (0‚Äì2)",
            "5. –°—Ä–µ–¥–Ω—è—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ (0‚Äì2)",
            "6. –ü–æ–∑–¥–Ω—è—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ (0‚Äì2)",
            "7. –†–∞–±–æ—Ç–∞ –∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å (0‚Äì4)",
            "8. –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ (0‚Äì4)",
            "9. –ê–∂–∏—Ç–∞—Ü–∏—è (0‚Äì4)",
            "10. –ü—Å–∏—Ö–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–≤–æ–≥–∞ (0‚Äì4)",
            "11. –°–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–≤–æ–≥–∞ (0‚Äì4)",
            "12. –ñ–µ–ª—É–¥–æ—á–Ω–æ-–∫–∏—à–µ—á–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã (0‚Äì2)",
            "13. –û–±—â–∏–µ —Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–º–ø—Ç–æ–º—ã (0‚Äì2)",
            "14. –ü–æ–ª–æ–≤—ã–µ —Å–∏–º–ø—Ç–æ–º—ã (0‚Äì2)",
            "15. –ò–ø–æ—Ö–æ–Ω–¥—Ä–∏—è (0‚Äì4)",
            "16. –ü–æ—Ç–µ—Ä—è –≤ –≤–µ—Å–µ (0‚Äì2)",
            "17. –ö—Ä–∏—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (0‚Äì2)",
        ],
        "scoring": "–°—É–º–º–∞ 17 –ø—É–Ω–∫—Ç–æ–≤; –¥–∏–∞–ø–∞–∑–æ–Ω 0‚Äì52",
        "interpretation": [
            ("0‚Äì7", "–ù–æ—Ä–º–∞ / —Ä–µ–º–∏—Å—Å–∏—è"),
            ("8‚Äì13", "–õ—ë–≥–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
            ("14‚Äì18", "–£–º–µ—Ä–µ–Ω–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
            ("19‚Äì22", "–¢—è–∂—ë–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
            ("‚â•23", "–û—á–µ–Ω—å —Ç—è–∂—ë–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
        ],
        "clinical_note": "–ó–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö. –†–µ–º–∏—Å—Å–∏—è: HAM-D ‚â§7. –û—Ç–≤–µ—Ç –Ω–∞ –ª–µ—á–µ–Ω–∏–µ: —Å–Ω–∏–∂–µ–Ω–∏–µ ‚â•50% –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ. –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–∞.",
    },
    "MADRS": {
        "name": "MADRS (Montgomery‚Äì√Ösberg Depression Rating Scale)",
        "purpose": "–û—Ü–µ–Ω–∫–∞ —Ç—è–∂–µ—Å—Ç–∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏; —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –Ω–∞ —Ñ–æ–Ω–µ –ª–µ—á–µ–Ω–∏—è",
        "items": 10,
        "range": "0‚Äì60",
        "time": "15‚Äì20 –º–∏–Ω—É—Ç",
        "source": "Montgomery & √Ösberg, 1979; Br J Psychiatry",
        "items_list": [
            "1. –í–∏–¥–∏–º–∞—è –≥—Ä—É—Å—Ç—å (0‚Äì6)",
            "2. –í—ã—Å–∫–∞–∑—ã–≤–∞–µ–º–∞—è –≥—Ä—É—Å—Ç—å (0‚Äì6)",
            "3. –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ (0‚Äì6)",
            "4. –ù–∞—Ä—É—à–µ–Ω–∏—è —Å–Ω–∞ (0‚Äì6)",
            "5. –°–Ω–∏–∂–µ–Ω–∏–µ –∞–ø–ø–µ—Ç–∏—Ç–∞ (0‚Äì6)",
            "6. –¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ (0‚Äì6)",
            "7. –°–Ω–∏–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ (0‚Äì6)",
            "8. –ù–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å (0‚Äì6)",
            "9. –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º—ã—Å–ª–∏ (0‚Äì6)",
            "10. –°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –º—ã—Å–ª–∏ (0‚Äì6)",
        ],
        "scoring": "–ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç 0‚Äì6; —Å—É–º–º–∞ 0‚Äì60",
        "interpretation": [
            ("0‚Äì6", "–ù–µ—Ç –¥–µ–ø—Ä–µ—Å—Å–∏–∏"),
            ("7‚Äì19", "–õ—ë–≥–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
            ("20‚Äì34", "–£–º–µ—Ä–µ–Ω–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
            ("35‚Äì60", "–¢—è–∂—ë–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"),
        ],
        "clinical_note": "–ë–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –Ω–∞ —Ñ–æ–Ω–µ –ª–µ—á–µ–Ω–∏—è, —á–µ–º HAM-D. –†–µ–º–∏—Å—Å–∏—è: MADRS ‚â§10. –û—Ç–≤–µ—Ç: —Å–Ω–∏–∂–µ–Ω–∏–µ ‚â•50%. –ù–µ –≤–∫–ª—é—á–∞–µ—Ç —Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–º–ø—Ç–æ–º—ã (–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –ø—Ä–∏ –∫–æ–º–æ—Ä–±–∏–¥–Ω–æ—Å—Ç–∏).",
    },
    "PANSS": {
        "name": "PANSS (Positive and Negative Syndrome Scale)",
        "purpose": "–û—Ü–µ–Ω–∫–∞ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–π, –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–π —Å–∏–º–ø—Ç–æ–º–∞—Ç–∏–∫–∏ –∏ –æ–±—â–µ–π –ø—Å–∏—Ö–æ–ø–∞—Ç–æ–ª–æ–≥–∏–∏ –ø—Ä–∏ —à–∏–∑–æ—Ñ—Ä–µ–Ω–∏–∏",
        "items": 30,
        "range": "30‚Äì210",
        "time": "30‚Äì40 –º–∏–Ω—É—Ç",
        "source": "Kay et al., 1987; Schizophr Bull",
        "items_list": [
            "–ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è –ø–æ–¥—à–∫–∞–ª–∞ (7 –ø—É–Ω–∫—Ç–æ–≤, P1‚ÄìP7):",
            "  P1. –ë—Ä–µ–¥; P2. –î–µ–∑–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º—ã—à–ª–µ–Ω–∏—è; P3. –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏",
            "  P4. –í–æ–∑–±—É–∂–¥–µ–Ω–∏–µ; P5. –ò–¥–µ–∏ –≤–µ–ª–∏—á–∏—è; P6. –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å; P7. –í—Ä–∞–∂–¥–µ–±–Ω–æ—Å—Ç—å",
            "–ù–µ–≥–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥—à–∫–∞–ª–∞ (7 –ø—É–Ω–∫—Ç–æ–≤, N1‚ÄìN7):",
            "  N1. –ü—Ä–∏—Ç—É–ø–ª–µ–Ω–Ω—ã–π –∞—Ñ—Ñ–µ–∫—Ç; N2. –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞–º–∫–Ω—É—Ç–æ—Å—Ç—å; N3. –ö–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–π –¥–µ—Ñ–∏—Ü–∏—Ç",
            "  N4. –ü–∞—Å—Å–∏–≤–Ω–æ-–∞–ø–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–º–∫–Ω—É—Ç–æ—Å—Ç—å; N5. –¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è",
            "  N6. –ù–∞—Ä—É—à–µ–Ω–∏–µ —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç–∏; N7. –°—Ç–µ—Ä–µ–æ—Ç–∏–ø–Ω–æ—Å—Ç—å –º—ã—à–ª–µ–Ω–∏—è",
            "–û–±—â–∞—è –ø—Å–∏—Ö–æ–ø–∞—Ç–æ–ª–æ–≥–∏—è (16 –ø—É–Ω–∫—Ç–æ–≤, G1‚ÄìG16)",
        ],
        "scoring": "–ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç 1‚Äì7; —Å—É–º–º—ã: P = 7‚Äì49, N = 7‚Äì49, G = 16‚Äì112; –û–±—â–∏–π = 30‚Äì210",
        "interpretation": [
            ("30‚Äì59", "–°–ª–∞–±–æ–≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è —Å–∏–º–ø—Ç–æ–º–∞—Ç–∏–∫–∞"),
            ("60‚Äì89", "–£–º–µ—Ä–µ–Ω–Ω–∞—è"),
            ("90‚Äì119", "–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è"),
            ("‚â•120", "–¢—è–∂—ë–ª–∞—è"),
        ],
        "clinical_note": "–û—Ç–≤–µ—Ç –Ω–∞ –ª–µ—á–µ–Ω–∏–µ: —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ –±–∞–ª–ª–∞ ‚â•20%. –†–µ–º–∏—Å—Å–∏—è (–∫—Ä–∏—Ç–µ—Ä–∏–∏ Andreasen, 2005): 8 –∫–ª—é—á–µ–≤—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ ‚â§3 –≤ —Ç–µ—á–µ–Ω–∏–µ ‚â•6 –º–µ—Å. –¢—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏.",
    },
    "CGIS": {
        "name": "CGI-S (Clinical Global Impression ‚Äì Severity)",
        "purpose": "–û–±—â–∞—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç—è–∂–µ—Å—Ç–∏ –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞",
        "items": 1,
        "range": "1‚Äì7",
        "time": "1‚Äì2 –º–∏–Ω—É—Ç—ã",
        "source": "Guy, 1976; ECDEU Assessment Manual",
        "items_list": [
            "–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å: '–ù–∞—Å–∫–æ–ª—å–∫–æ —Ç—è–∂–µ–ª–æ –ø—Å–∏—Ö–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è?'",
        ],
        "scoring": "1 –±–∞–ª–ª: –Ω–æ—Ä–º–∞ (–Ω–µ –±–æ–ª–µ–Ω); 2: –ø–æ–≥—Ä–∞–Ω–∏—á–Ω–æ –±–æ–ª–µ–Ω; 3: —Å–ª–∞–±–æ –±–æ–ª–µ–Ω; 4: —É–º–µ—Ä–µ–Ω–Ω–æ –±–æ–ª–µ–Ω; 5: –∑–∞–º–µ—Ç–Ω–æ –±–æ–ª–µ–Ω; 6: —Ç—è–∂–µ–ª–æ –±–æ–ª–µ–Ω; 7: –∫—Ä–∞–π–Ω–µ —Ç—è–∂–µ–ª–æ –±–æ–ª–µ–Ω",
        "interpretation": [
            ("1", "–ù–µ –±–æ–ª–µ–Ω ‚Äî –Ω–æ—Ä–º–∞"),
            ("2", "–ü–æ–≥—Ä–∞–Ω–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ"),
            ("3", "–°–ª–∞–±–æ–≤—ã—Ä–∞–∂–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"),
            ("4", "–£–º–µ—Ä–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"),
            ("5", "–ó–∞–º–µ—Ç–Ω–æ –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"),
            ("6", "–¢—è–∂—ë–ª–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"),
            ("7", "–ö—Ä–∞–π–Ω–µ —Ç—è–∂—ë–ª–æ–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"),
        ],
        "clinical_note": "–ü—Ä–æ—Å—Ç–∞—è –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —à–∫–∞–ª–∞; –ø—Ä–∏–º–µ–Ω–∏–º–∞ –ø—Ä–∏ –ª—é–±–æ–º —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. CGI-I (—É–ª—É—á—à–µ–Ω–∏–µ) ‚Äî –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —à–∫–∞–ª–∞: 1 (–æ—á–µ–Ω—å –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ) ‚Äì 7 (–æ—á–µ–Ω—å –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ). –û—Ç–≤–µ—Ç –Ω–∞ —Ç–µ—Ä–∞–ø–∏—é: CGI-I ‚â§ 2.",
    },
    "GAF": {
        "name": "GAF (Global Assessment of Functioning)",
        "purpose": "–û—Ü–µ–Ω–∫–∞ –æ–±—â–µ–≥–æ —É—Ä–æ–≤–Ω—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ, —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è",
        "items": 1,
        "range": "1‚Äì100",
        "time": "5‚Äì10 –º–∏–Ω—É—Ç",
        "source": "DSM-III-R/IV (–û—Å—å V)",
        "items_list": [
            "–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–æ—Å—Ç–∞–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞: —Å–∏–º–ø—Ç–æ–º—ã + —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ—Ä—ë—Ç—Å—è —Ö—É–¥—à–∏–π –∏–∑ –¥–≤—É—Ö).",
        ],
        "scoring": "100‚Äì91: –Ω–µ—Ç —Å–∏–º–ø—Ç–æ–º–æ–≤, –æ—Ç–ª–∏—á–Ω–æ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ; 90‚Äì81: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã; 80‚Äì71: —Å–∏–º–ø—Ç–æ–º—ã –≤—Ä–µ–º–µ–Ω–Ω—ã; 70‚Äì61: –ª—ë–≥–∫–∏–µ —Å–∏–º–ø—Ç–æ–º—ã; 60‚Äì51: —É–º–µ—Ä–µ–Ω–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã; 50‚Äì41: —Å–µ—Ä—å—ë–∑–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã; 40‚Äì31: –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è; 30‚Äì21: —Ç—è–∂—ë–ª–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ; 20‚Äì11: –æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∞–º–æ–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è; 10‚Äì1: –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –æ–ø–∞—Å–Ω–æ—Å—Ç—å",
        "interpretation": [
            ("91‚Äì100", "–ù–µ—Ç —Å–∏–º–ø—Ç–æ–º–æ–≤, –æ—Ç–ª–∏—á–Ω–æ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"),
            ("71‚Äì90", "–õ—ë–≥–∫–∏–µ —Å–∏–º–ø—Ç–æ–º—ã / –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è"),
            ("51‚Äì70", "–£–º–µ—Ä–µ–Ω–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã"),
            ("31‚Äì50", "–°–µ—Ä—å—ë–∑–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã / –Ω–∞—Ä—É—à–µ–Ω–∏—è"),
            ("1‚Äì30", "–¢—è–∂—ë–ª—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è / –æ–ø–∞—Å–Ω–æ—Å—Ç—å"),
        ],
        "clinical_note": "–®–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. GAF < 50 ‚Äî –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø–æ–∫–∞–∑–∞–Ω–∏–µ –∫ –≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: —Å–º–µ—à–µ–Ω–∏–µ —Å–∏–º–ø—Ç–æ–º–∞—Ç–∏–∫–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ–¥–Ω–æ–º –±–∞–ª–ª–µ.",
    },
    "BPRS": {
        "name": "BPRS (Brief Psychiatric Rating Scale)",
        "purpose": "–ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ –æ–±—â–µ–π –ø—Å–∏—Ö–æ–ø–∞—Ç–æ–ª–æ–≥–∏–∏",
        "items": 18,
        "range": "18‚Äì126",
        "time": "20‚Äì30 –º–∏–Ω—É—Ç",
        "source": "Overall & Gorham, 1962",
        "items_list": [
            "1. –°–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–∑–∞–±–æ—á–µ–Ω–Ω–æ—Å—Ç—å; 2. –¢—Ä–µ–≤–æ–≥–∞; 3. –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ö–æ–¥",
            "4. –î–µ–∑–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º—ã—à–ª–µ–Ω–∏—è; 5. –ß—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã; 6. –ù–∞–ø—Ä—è–∂—ë–Ω–Ω–æ—Å—Ç—å",
            "7. –ü—Ä–∏—á—É–¥–ª–∏–≤–æ—Å—Ç—å; 8. –ì—Ä–∞–Ω–¥–∏–æ–∑–Ω–æ—Å—Ç—å; 9. –î–µ–ø—Ä–µ—Å—Å–∏—è",
            "10. –í—Ä–∞–∂–¥–µ–±–Ω–æ—Å—Ç—å; 11. –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å; 12. –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏",
            "13. –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ; 14. –ù–µ–æ–±—ã—á–Ω—ã–π –≤–∏–¥; 15. –í–æ–∑–±—É–∂–¥–µ–Ω–∏–µ",
            "16. –î–µ–∑–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è; 17. –ü—Ä–∏—Ç—É–ø–ª–µ–Ω–Ω—ã–π –∞—Ñ—Ñ–µ–∫—Ç; 18. –í–æ–∑–±—É–∂–¥–µ–Ω–∏–µ",
        ],
        "scoring": "–ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç 1‚Äì7; —Å—É–º–º–∞ 18‚Äì126",
        "interpretation": [
            ("18‚Äì30", "–õ—ë–≥–∫–∞—è —Å–∏–º–ø—Ç–æ–º–∞—Ç–∏–∫–∞ / –ø–æ–≥—Ä–∞–Ω–∏—á–Ω–∞—è –Ω–æ—Ä–º–∞"),
            ("31‚Äì40", "–£–º–µ—Ä–µ–Ω–Ω–∞—è"),
            ("41‚Äì52", "–£–º–µ—Ä–µ–Ω–Ω–æ-—Ç—è–∂—ë–ª–∞—è"),
            ("53‚Äì126", "–¢—è–∂—ë–ª–∞—è / –æ—á–µ–Ω—å —Ç—è–∂—ë–ª–∞—è"),
        ],
        "clinical_note": "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Å—Ç—Ä–æ–π –ø—Å–∏—Ö–æ—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–º–ø—Ç–æ–º–∞—Ç–∏–∫–∏. –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –Ω–∞ —Ñ–æ–Ω–µ –ª–µ—á–µ–Ω–∏—è.",
    },
    "CSSRS": {
        "name": "C-SSRS (Columbia Suicide Severity Rating Scale)",
        "purpose": "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—É–∏—Ü–∏–¥–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ –∏–¥–µ–∞—Ü–∏–π",
        "items": 6,
        "range": "–ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω–∞—è / –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —á–∏—Å–ª–æ–≤–æ–≥–æ –±–∞–ª–ª–∞",
        "time": "5‚Äì10 –º–∏–Ω—É—Ç",
        "source": "Posner et al., 2011; Am J Psychiatry",
        "items_list": [
            "–°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –∏–¥–µ–∞—Ü–∏–∏ (5 —É—Ä–æ–≤–Ω–µ–π –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏):",
            "  1. –ü–∞—Å—Å–∏–≤–Ω—ã–µ –º—ã—Å–ª–∏ –æ —Å–º–µ—Ä—Ç–∏",
            "  2. –ù–µ—Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Å—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –∏–¥–µ–∞—Ü–∏–∏",
            "  3. –°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –∏–¥–µ–∞—Ü–∏–∏ —Å –º–µ—Ç–æ–¥–æ–º (–±–µ–∑ –ø–ª–∞–Ω–∞)",
            "  4. –°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –∏–¥–µ–∞—Ü–∏–∏ —Å –ø–ª–∞–Ω–æ–º",
            "  5. –°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –∏–¥–µ–∞—Ü–∏–∏ —Å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ–º –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å",
            "",
            "–°—É–∏—Ü–∏–¥–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:",
            "  6. –ü–æ–≤–µ–¥–µ–Ω–∏–µ (–ø–æ–ø—ã—Ç–∫–∞, –ø—Ä–µ—Ä–≤–∞–Ω–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞, –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è)",
        ],
        "scoring": "–ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω–∞—è: –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ/–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏–¥–µ–∞—Ü–∏–π –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è. –ù–µ—Ç —Å—É–º–º–∞—Ä–Ω–æ–≥–æ –±–∞–ª–ª–∞.",
        "interpretation": [
            ("–£—Ä–æ–≤–Ω–∏ 1‚Äì2", "–ü–∞—Å—Å–∏–≤–Ω—ã–µ –∏–¥–µ–∞—Ü–∏–∏ ‚Äî –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ"),
            ("–£—Ä–æ–≤–Ω–∏ 3‚Äì4", "–ê–∫—Ç–∏–≤–Ω—ã–µ –∏–¥–µ–∞—Ü–∏–∏ ‚Äî –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∏—Å–∫, –≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ"),
            ("–£—Ä–æ–≤–µ–Ω—å 5", "–ù–∞–º–µ—Ä–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å ‚Äî –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –Ω–µ–æ—Ç–ª–æ–∂–Ω–∞—è –æ—Ü–µ–Ω–∫–∞"),
            ("–ü–æ–≤–µ–¥–µ–Ω–∏–µ", "–õ—é–±–æ–µ —Å—É–∏—Ü–∏–¥–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ ‚Äî –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞"),
        ],
        "clinical_note": "–°—Ç–∞–Ω–¥–∞—Ä—Ç FDA –¥–ª—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –í–û–ó. –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–∏–Ω–≥–∞. –ö–æ—Ä–æ—Ç–∫–∏–π —Å–∫—Ä–∏–Ω–∏–Ω–≥: –≤–æ–ø—Ä–æ—Å—ã 1‚Äì6 –±–µ–∑ –±–∞–ª–ª–∞.",
    },
    "YMRS": {
        "name": "YMRS (Young Mania Rating Scale)",
        "purpose": "–û—Ü–µ–Ω–∫–∞ —Ç—è–∂–µ—Å—Ç–∏ –º–∞–Ω–∏–∞–∫–∞–ª—å–Ω—ã—Ö —Å–∏–º–ø—Ç–æ–º–æ–≤",
        "items": 11,
        "range": "0‚Äì60",
        "time": "15‚Äì30 –º–∏–Ω—É—Ç",
        "source": "Young et al., 1978; Br J Psychiatry",
        "items_list": [
            "1. –ü—Ä–∏–ø–æ–¥–Ω—è—Ç–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (0‚Äì4)",
            "2. –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –¥–≤–∏–≥–∞—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (0‚Äì4)",
            "3. –°–µ–∫—Å—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å (0‚Äì4)",
            "4. –°–æ–Ω (0‚Äì4)",
            "5. –†–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (0‚Äì8)",
            "6. –†–µ—á—å (0‚Äì8)",
            "7. –ù–∞—Ä—É—à–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤–æ–≥–æ/–º—ã—Å–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (0‚Äì4)",
            "8. –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –º—ã—à–ª–µ–Ω–∏—è (0‚Äì8)",
            "9. –†–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω–æ–µ/–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (0‚Äì8)",
            "10. –í–Ω–µ—à–Ω–æ—Å—Ç—å (0‚Äì4)",
            "11. –ò–Ω—Å–∞–π—Ç (0‚Äì4)",
        ],
        "scoring": "–°—É–º–º–∞ 0‚Äì60 (4 –ø—É–Ω–∫—Ç–∞ –ø–æ 0‚Äì8, 7 –ø—É–Ω–∫—Ç–æ–≤ –ø–æ 0‚Äì4)",
        "interpretation": [
            ("0‚Äì12", "–ù–µ—Ç –º–∞–Ω–∏–∏ / —Ä–µ–º–∏—Å—Å–∏—è"),
            ("13‚Äì19", "–õ—ë–≥–∫–∞—è –º–∞–Ω–∏—è"),
            ("20‚Äì25", "–£–º–µ—Ä–µ–Ω–Ω–∞—è –º–∞–Ω–∏—è"),
            ("26‚Äì37", "–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è –º–∞–Ω–∏—è"),
            ("‚â•38", "–¢—è–∂—ë–ª–∞—è –º–∞–Ω–∏—è"),
        ],
        "clinical_note": "–†–µ–º–∏—Å—Å–∏—è: YMRS ‚â§12. –û—Ç–≤–µ—Ç –Ω–∞ –ª–µ—á–µ–Ω–∏–µ: —Å–Ω–∏–∂–µ–Ω–∏–µ ‚â•50%. –¢—Ä–µ–±—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–Ω–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤—å—é. –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –¥–∏–Ω–∞–º–∏–∫–µ –ø—Ä–∏ –æ—Å—Ç—Ä–æ–π –º–∞–Ω–∏–∏.",
    },
}


def _build_scale_text(code: str) -> str:
    scale = _SCALES.get(code)
    if not scale:
        return "–®–∫–∞–ª–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞."

    lines = [
        f"üìä *{scale['name']}*",
        "",
        f"üéØ *–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:* {scale['purpose']}",
        f"üìù *–ü—É–Ω–∫—Ç–æ–≤:* {scale['items']}  |  *–î–∏–∞–ø–∞–∑–æ–Ω:* {scale['range']}",
        f"‚è± *–í—Ä–µ–º—è:* {scale['time']}",
        f"üìö *–ò—Å—Ç–æ—á–Ω–∏–∫:* {scale['source']}",
        "",
        "*–ü—É–Ω–∫—Ç—ã —à–∫–∞–ª—ã:*",
    ]
    for item in scale["items_list"]:
        lines.append(f"  {item}")

    lines += ["", f"*–ü–æ–¥—Å—á—ë—Ç:* {scale['scoring']}", "", "*–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:*"]
    for score_range, meaning in scale["interpretation"]:
        lines.append(f"  *{score_range}* ‚Äî {meaning}")

    lines += [
        "",
        f"üí° *–ö–ª–∏–Ω–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:* {scale['clinical_note']}",
        "",
        "‚Äî",
        "–î–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–∞–ª–ª–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 14)",
    ]
    return "\n".join(lines)


def _interpret_score(code: str, raw_score: str) -> str:
    scale = _SCALES.get(code)
    if not scale:
        return "–®–∫–∞–ª–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞."

    try:
        score = int(raw_score.strip())
    except ValueError:
        return "‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ–≤–æ–π –±–∞–ª–ª."

    interpretation = scale["interpretation"]
    matched = None
    for score_range, meaning in interpretation:
        # Parse range
        rng = score_range.replace("‚â•", "").replace("‚â§", "").strip()
        if "‚Äì" in score_range:
            parts = score_range.split("‚Äì")
            try:
                low, high = int(parts[0]), int(parts[1])
                if low <= score <= high:
                    matched = meaning
                    break
            except ValueError:
                pass
        elif score_range.startswith("‚â•"):
            try:
                threshold = int(rng)
                if score >= threshold:
                    matched = meaning
                    break
            except ValueError:
                pass
        elif score_range.startswith("‚â§"):
            try:
                threshold = int(rng)
                if score <= threshold:
                    matched = meaning
                    break
            except ValueError:
                pass
        else:
            try:
                if score == int(rng):
                    matched = meaning
                    break
            except ValueError:
                pass

    if matched is None:
        # Last range
        matched = interpretation[-1][1]

    return (
        f"üìä *{scale['name']}*\n\n"
        f"–ë–∞–ª–ª: *{score}* (–¥–∏–∞–ø–∞–∑–æ–Ω {scale['range']})\n"
        f"–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: *{matched}*\n\n"
        f"üí° {scale['clinical_note']}"
    )


# ‚îÄ‚îÄ‚îÄ Conversation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

async def start_scale_calc(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    await update.effective_message.reply_text(
        "üìä *–ü—Å–∏—Ö–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —à–∫–∞–ª—ã*\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ —à–∫–∞–ª—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–ª–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –±–∞–ª–ª–æ–≤:",
        parse_mode="Markdown",
        reply_markup=scale_select_keyboard(),
    )
    return SCALE_SELECT


async def scale_select_callback(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    query = update.callback_query
    await query.answer()
    data = query.data

    if data == "back:main":
        await query.message.reply_text("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=main_menu_keyboard())
        return MAIN_MENU

    if data == "scale:again":
        await query.edit_message_text(
            "–í—ã–±–µ—Ä–∏—Ç–µ —à–∫–∞–ª—É:",
            reply_markup=scale_select_keyboard(),
        )
        return SCALE_SELECT

    if data.startswith("scale:"):
        code = data[len("scale:"):]
        context.user_data["scale_code"] = code
        text = _build_scale_text(code)
        for i in range(0, len(text), 4000):
            await query.message.reply_text(text[i:i + 4000], parse_mode="Markdown")
        await query.message.reply_text(
            "–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º–∞—Ä–Ω—ã–π –±–∞–ª–ª –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é —à–∫–∞–ª—É:",
            reply_markup=scale_result_keyboard(),
        )
        return SCALE_INPUT

    return SCALE_SELECT


async def scale_input_message(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    text = update.message.text.strip()
    code = context.user_data.get("scale_code", "")

    result = _interpret_score(code, text)
    await update.message.reply_text(result, parse_mode="Markdown")
    await update.message.reply_text(
        "–í–≤–µ–¥–∏—Ç–µ –¥—Ä—É–≥–æ–π –±–∞–ª–ª –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup=scale_result_keyboard(),
    )
    return SCALE_RESULT


async def scale_result_callback(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    query = update.callback_query
    await query.answer()
    data = query.data

    if data == "back:main":
        await query.message.reply_text("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=main_menu_keyboard())
        return MAIN_MENU

    if data == "scale:again":
        await query.edit_message_text(
            "–í—ã–±–µ—Ä–∏—Ç–µ —à–∫–∞–ª—É:",
            reply_markup=scale_select_keyboard(),
        )
        return SCALE_SELECT

    return SCALE_RESULT
